# Configuration for computational efficiency scaling experiment

experiment:
  name: "computational_efficiency"
  description: "Analyze computational efficiency and scaling properties"
  seed: 42

# Scaling test configuration
scaling_test:
  # Graph sizes to test (start small, go large)
  sizes: [5, 10, 15, 20, 30, 50, 75, 100, 150, 200]
  
  # Number of repetitions for statistical significance
  n_repetitions: 5
  
  # Maximum time per method (seconds) before timeout
  max_time_per_method: 300.0  # 5 minutes
  
  # Maximum memory per method (MB) before OOM protection
  max_memory_mb: 8000.0  # 8GB
  
  # Methods to compare
  methods_to_compare:
    - "random"         # Constant baseline
    - "our_method"     # Our neural approach
    - "cbo_u"          # Exact CBO (where feasible)
    - "untrained"      # Untrained neural (for comparison)

# SCM generation for testing
scm_generation:
  structure_types: ["random"]  # Use random graphs for scaling test
  edge_density: 0.3
  mechanism_type: "linear"  # Linear mechanisms for consistency

# Data generation settings
data_generation:
  n_observational_samples: 100  # Modest initial dataset
  n_interventions: 20  # Limited interventions for efficiency testing

# Specific efficiency tests
efficiency_tests:
  # Test 1.1: Inference time scaling
  inference_time:
    enabled: true
    measure_per_intervention: true
    include_tensor_conversion: true
    
  # Test 1.2: Memory usage scaling
  memory_usage:
    enabled: true
    track_peak_memory: true
    track_gpu_memory: true
    force_gc_between_runs: true
    
  # Test 1.3: Training time analysis
  training_time:
    enabled: true
    estimate_training_cost: true
    compute_amortization_breakeven: true
    
# Performance analysis settings
analysis:
  # Complexity estimation
  estimate_complexity_class: true
  fit_scaling_models: true
  
  # Comparison metrics
  compute_relative_speedup: true
  identify_feasibility_limits: true
  
  # Statistical analysis
  statistical_testing: true
  confidence_level: 0.95

# Output settings
output:
  save_raw_measurements: true
  generate_scaling_plots: true
  create_comparison_tables: true
  export_latex_tables: true

# Resource limits and safety
resource_limits:
  # Kill processes that exceed these limits
  max_wall_time_seconds: 600  # 10 minutes per run
  max_memory_usage_mb: 12000  # 12GB
  
  # Warnings before limits
  warn_time_seconds: 300
  warn_memory_mb: 8000

# Logging settings
logging:
  level: "INFO"
  detailed_timing: true
  memory_snapshots: true